<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phonics Games: Slider, Letters & Words</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Andika:wght@400;700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
   
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: auto;
    }

    body {
      font-family: 'Andika', sans-serif;
      background: #f5f5f5;
      overflow-x: hidden; 
      padding-bottom: 40px; /* Space at bottom */
    }

    .card {
      background: white;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
      max-width: 420px;
      width: 90%;
      margin: 24px auto;
    }

    h1 {
      font-size: 1.4rem;
      margin: 0 0 12px 0;
    }

    /* --- GAME 1: Sound Slider Styles --- */
    .letters {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0 10px;
    }

    .letter {
      font-size: 3.2rem;
      padding: 10px;
      min-width: 54px;
      border-radius: 8px;
      border: 2px solid transparent;
      transition: background 0.2s, transform 0.2s, border-color 0.2s;
      cursor: default;
    }

    .letter.inactive { opacity: 0.3; }

    .letter.active {
      background: #e0f7fa;
      border-color: #00acc1;
      transform: scale(1.08);
      opacity: 1;
    }

    .blended-word {
      font-size: 2.2rem;
      margin-top: 4px;
      min-height: 2.4rem;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 40px;
      background: transparent;
      margin-top: 25px;
      touch-action: none;
    }

    input[type="range"]::-webkit-slider-runnable-track {
      height: 18px;
      background: #ddd;
      border-radius: 10px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 44px;
      height: 44px;
      background: #00acc1;
      border-radius: 50%;
      margin-top: -13px;
      cursor: pointer;
    }

    input[type="range"]::-moz-range-track {
      height: 18px;
      background: #ddd;
      border-radius: 10px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 44px;
      height: 44px;
      background: #00acc1;
      border-radius: 50%;
      cursor: pointer;
    }

    .hint {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 12px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    button {
      font-family: 'Andika', sans-serif;
      font-size: 1rem;
      padding: 12px 20px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #4caf50;
      color: white;
      font-weight: 700;
      white-space: nowrap;
      transition: transform 0.1s;
    }

    #shuffleBtn { background: #2196f3; }
    button:active { transform: scale(0.97); }

    /* --- GAME 2: Letter Game Styles --- */
    .letter-display {
      font-size: 5rem;
      margin: 8px 0 12px;
      font-weight: 700;
      color: #333;
    }

    .case-toggle-btn {
      background: #9c27b0;
      margin-bottom: 12px;
    }

    .picture-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .picture-btn {
      flex: 1 1 45%;
      min-width: 140px;
      max-width: 180px;
      border-radius: 16px;
      border: 4px solid transparent;
      padding: 12px;
      background: #eeeeee;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s, border-color 0.2s;
    }

    .picture-btn .emoji {
      font-size: 3rem;
      display: block;
      margin-bottom: 4px;
      pointer-events: none;
    }

    .picture-btn .word-label {
      font-size: 1.3rem;
      pointer-events: none;
    }

    /* Shared States for Game 2 & 3 */
    .picture-btn.correct {
      border-color: #4caf50;
      background: #e8f5e9;
      animation: popBounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .picture-btn.wrong {
      border-color: #f44336;
      background: #ffebee;
      animation: shake 0.4s;
    }

    .feedback {
      margin-top: 15px;
      font-size: 1.1rem;
      min-height: 1.2em;
      color: #444;
      font-weight: 700;
    }

    /* --- GAME 3: Word to Picture Styles --- */
    .target-word {
      font-size: 3.5rem;
      font-weight: 700;
      color: #333;
      margin: 10px 0;
      min-height: 1.2em;
    }

    .bubble-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px; /* Increased gap slightly for bubbles */
      margin: 25px auto;
      max-width: 380px;
    }

    /* NEW BUBBLE STYLING */
    .bubble-option {
      width: 90px; /* Slightly larger */
      height: 90px;
      border-radius: 50%;
      
      /* Transparent Blue/Pink tinted gradient background */
      background: linear-gradient(135deg, rgba(200, 240, 255, 0.5), rgba(255, 220, 240, 0.5));
      
      /* Inset shadows for sheen and 3D effect */
      box-shadow: inset 2px 2px 10px rgba(255, 255, 255, 0.9), /* Top-left highlight */
                  inset -2px -2px 10px rgba(0, 0, 0, 0.05), /* Bottom-right shadow */
                  0 4px 8px rgba(0,0,0,0.1); /* Outer drop shadow */
      
      border: 1px solid rgba(255, 255, 255, 0.7); /* Semi-transparent white border */
      
      font-size: 3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.1s, background 0.2s, border-color 0.2s, box-shadow 0.2s;
      -webkit-tap-highlight-color: transparent;
      user-select: none; 
    }

    .bubble-option:active {
      transform: scale(0.95);
      box-shadow: inset 1px 1px 5px rgba(255, 255, 255, 0.7),
                  inset -1px -1px 5px rgba(0, 0, 0, 0.05),
                  0 2px 4px rgba(0,0,0,0.1);
    }

    /* Bubble Specific Correct/Wrong States (overrides shared states) */
    .bubble-option.correct {
      /* Green tint over the bubble */
      background: linear-gradient(135deg, rgba(200, 255, 200, 0.6), rgba(180, 240, 180, 0.6));
      border-color: #4caf50;
      animation: popBounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .bubble-option.wrong {
      /* Red tint over the bubble */
      background: linear-gradient(135deg, rgba(255, 200, 200, 0.6), rgba(240, 180, 180, 0.6));
      border-color: #f44336;
      animation: shake 0.4s;
    }


    /* Animations */
    @keyframes popBounce {
      0% { transform: scale(1); }
      40% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>Sound Slider</h1>
    <div id="letters" class="letters"></div>
    <div id="blendedWord" class="blended-word"></div>
    <input id="blendSlider" type="range" min="0" max="2" step="1" value="0">
    <div class="hint">Say the sounds as you move the slider.</div>
    <div class="buttons">
      <button id="nextWordBtn">New Word</button>
      <button id="shuffleBtn">Shuffle</button>
    </div>
  </div>

  <div class="card">
    <h1>Letter Game</h1>
    <div id="letterDisplay" class="letter-display">A</div>
    <button id="caseToggleBtn" class="case-toggle-btn">Make Small</button>
    <div class="picture-buttons">
      <button id="optionLeft" class="picture-btn">
        <span class="emoji">üçé</span>
        <span class="word-label">apple</span>
      </button>
      <button id="optionRight" class="picture-btn">
        <span class="emoji">‚òÄÔ∏è</span>
        <span class="word-label">sun</span>
      </button>
    </div>
    <div id="letterFeedback" class="feedback"></div>
  </div>

  <div class="card">
    <h1>Word Game</h1>
    <div id="targetWord" class="target-word"></div>
    <div class="hint">Tap the bubble that matches the word.</div>
    
    <div id="bubbleGrid" class="bubble-grid">
      </div>

    <div id="wordGameFeedback" class="feedback"></div>
  </div>

  <script>
    /* ----------------------------------------------------------
       SHARED UTILITIES
       ---------------------------------------------------------- */
    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function fireConfettiFromButton(buttonEl) {
      if (typeof confetti === 'undefined') return;

      const rect = buttonEl.getBoundingClientRect();
      const x = (rect.left + rect.width / 2) / window.innerWidth;
      const y = (rect.top + rect.height / 2) / window.innerHeight;

      confetti({
        particleCount: 60,
        spread: 60,
        origin: { x: x, y: y },
        colors: ['#4caf50', '#ffeb3b', '#2196f3', '#ff9800'],
        disableForReducedMotion: true,
        zIndex: 1000,
      });
    }

    /* ----------------------------------------------------------
       GAME 1: SOUND SLIDER LOGIC
       ---------------------------------------------------------- */
    const words = [
      "cat","can","cap","fan","man","map","nap","pan","rat","bag",
      "bed","beg","den","hen","jet","leg","men","pen","red","wet",
      "big","dig","fin","fix","hid","jig","pig","pin","sit","six",
      "box","cob","dog","dot","hop","hot","log","mop","pot","top",
      "bug","bun","cup","cut","fun","gum","hug","mud","sun","pup"
    ];

    let currentIndex = 0;
    const lettersContainer = document.getElementById("letters");
    const blendedWordEl = document.getElementById("blendedWord");
    const slider = document.getElementById("blendSlider");
    const nextWordBtn = document.getElementById("nextWordBtn");
    const shuffleBtn = document.getElementById("shuffleBtn");

    function loadWord() {
      const word = words[currentIndex];
      lettersContainer.innerHTML = "";
      slider.value = 0;
      blendedWordEl.textContent = "";

      for (const ch of word) {
        const span = document.createElement("span");
        span.textContent = ch;
        span.className = "letter inactive";
        lettersContainer.appendChild(span);
      }
      updateBlend();
    }

    function updateBlend() {
      const word = words[currentIndex];
      let stage = parseInt(slider.value, 10);
      const letterEls = lettersContainer.querySelectorAll(".letter");

      letterEls.forEach((el, idx) => {
        if (idx <= stage) {
          el.classList.add("active");
          el.classList.remove("inactive");
        } else {
          el.classList.add("inactive");
          el.classList.remove("active");
        }
      });

      if (stage === 0) blendedWordEl.textContent = word[0];
      else if (stage === 1) blendedWordEl.textContent = word.slice(0, 2);
      else blendedWordEl.textContent = word;
    }

    slider.addEventListener("input", updateBlend);
    
    nextWordBtn.addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % words.length;
      loadWord();
    });

    shuffleBtn.addEventListener("click", () => {
      shuffleArray(words);
      currentIndex = 0;
      loadWord();
    });

    loadWord(); // Init Game 1

    /* ----------------------------------------------------------
       GAME 2: LETTER GAME LOGIC
       ---------------------------------------------------------- */
    const beginSoundChoices = {
      a: { correct: { word: "apple", emoji: "üçé" }, wrong: { word: "sun", emoji: "‚òÄÔ∏è" } },
      b: { correct: { word: "ball", emoji: "‚öΩ" }, wrong: { word: "cat", emoji: "üê±" } },
      c: { correct: { word: "car", emoji: "üöó" }, wrong: { word: "fish", emoji: "üêü" } },
      d: { correct: { word: "dog", emoji: "üê∂" }, wrong: { word: "hat", emoji: "üé©" } },
      e: { correct: { word: "egg", emoji: "ü•ö" }, wrong: { word: "bus", emoji: "üöå" } },
      f: { correct: { word: "fish", emoji: "üêü" }, wrong: { word: "moon", emoji: "üåô" } },
      g: { correct: { word: "goat", emoji: "üêê" }, wrong: { word: "leaf", emoji: "üçÉ" } },
      h: { correct: { word: "hat", emoji: "üé©" }, wrong: { word: "star", emoji: "‚≠ê" } },
      i: { correct: { word: "ice cream", emoji: "üç¶" }, wrong: { word: "bed", emoji: "üõèÔ∏è" } },
      j: { correct: { word: "jet", emoji: "‚úàÔ∏è" }, wrong: { word: "pig", emoji: "üê∑" } },
      k: { correct: { word: "key", emoji: "üîë" }, wrong: { word: "apple", emoji: "üçé" } },
      l: { correct: { word: "lion", emoji: "ü¶Å" }, wrong: { word: "egg", emoji: "ü•ö" } },
      m: { correct: { word: "moon", emoji: "üåô" }, wrong: { word: "car", emoji: "üöó" } },
      n: { correct: { word: "nose", emoji: "üëÉ" }, wrong: { word: "dog", emoji: "üê∂" } },
      o: { correct: { word: "octopus", emoji: "üêô" }, wrong: { word: "hat", emoji: "üé©" } },
      p: { correct: { word: "pig", emoji: "üê∑" }, wrong: { word: "sun", emoji: "‚òÄÔ∏è" } },
      q: { correct: { word: "queen", emoji: "üëë" }, wrong: { word: "fish", emoji: "üêü" } },
      r: { correct: { word: "rain", emoji: "üåßÔ∏è" }, wrong: { word: "cat", emoji: "üê±" } },
      s: { correct: { word: "sun", emoji: "‚òÄÔ∏è" }, wrong: { word: "moon", emoji: "üåô" } },
      t: { correct: { word: "tiger", emoji: "üêØ" }, wrong: { word: "egg", emoji: "ü•ö" } },
      u: { correct: { word: "umbrella", emoji: "‚òî" }, wrong: { word: "lion", emoji: "ü¶Å" } },
      v: { correct: { word: "van", emoji: "üöê" }, wrong: { word: "ball", emoji: "‚öΩ" } },
      w: { correct: { word: "whale", emoji: "üê≥" }, wrong: { word: "dog", emoji: "üê∂" } },
      x: { correct: { word: "x-ray", emoji: "üíÄ" }, wrong: { word: "cat", emoji: "üê±" } },
      y: { correct: { word: "yarn", emoji: "üß∂" }, wrong: { word: "leaf", emoji: "üçÉ" } },
      z: { correct: { word: "zebra", emoji: "ü¶ì" }, wrong: { word: "hat", emoji: "üé©" } }
    };

    const letterDisplayEl = document.getElementById("letterDisplay");
    const caseToggleBtn = document.getElementById("caseToggleBtn");
    const optionLeftBtn = document.getElementById("optionLeft");
    const optionRightBtn = document.getElementById("optionRight");
    const feedbackEl = document.getElementById("letterFeedback");

    let letterOrder = Object.keys(beginSoundChoices);
    shuffleArray(letterOrder);

    let letterIndex = 0;
    let isUppercase = true;
    let currentLetter = "a";
    let currentCorrectWord = "apple";
    let isLocked = false;

    function updateCaseButtonText() {
      caseToggleBtn.textContent = isUppercase ? "Make Small" : "Make Big";
    }

    function refreshLetterCase() {
      letterDisplayEl.textContent = isUppercase
        ? currentLetter.toUpperCase()
        : currentLetter.toLowerCase();
      updateCaseButtonText();
    }

    function setPictureButton(buttonEl, optionData, isCorrect) {
      buttonEl.className = "picture-btn"; 
      buttonEl.dataset.correct = isCorrect ? "true" : "false";
      const emojiSpan = buttonEl.querySelector(".emoji");
      const wordSpan = buttonEl.querySelector(".word-label");
      emojiSpan.textContent = optionData.emoji;
      wordSpan.textContent = optionData.word;
    }

    function loadLetterRound() {
      if (letterIndex >= letterOrder.length) {
        shuffleArray(letterOrder);
        letterIndex = 0;
      }

      currentLetter = letterOrder[letterIndex];
      const data = beginSoundChoices[currentLetter];
      currentCorrectWord = data.correct.word;
      isLocked = false;
      refreshLetterCase();

      const options = [
        { data: data.correct, isCorrect: true },
        { data: data.wrong, isCorrect: false }
      ];
      shuffleArray(options);

      setPictureButton(optionLeftBtn, options[0].data, options[0].isCorrect);
      setPictureButton(optionRightBtn, options[1].data, options[1].isCorrect);

      feedbackEl.textContent = "";
    }

    function handlePictureClick(event) {
      if (isLocked) return;

      const btn = event.currentTarget;
      const isCorrect = btn.dataset.correct === "true";

      if (isCorrect) {
        isLocked = true;
        btn.classList.add("correct");
        fireConfettiFromButton(btn);
        
        feedbackEl.textContent = `Yes! ${letterDisplayEl.textContent} is for ${currentCorrectWord}.`;
        feedbackEl.style.color = "#2e7d32";

        setTimeout(() => {
          letterIndex++;
          loadLetterRound();
        }, 1500);

      } else {
        btn.classList.add("wrong");
        feedbackEl.textContent = "Oops, try again!";
        feedbackEl.style.color = "#d32f2f";
        setTimeout(() => {
          btn.classList.remove("wrong");
        }, 500);
      }
    }

    optionLeftBtn.addEventListener("click", handlePictureClick);
    optionRightBtn.addEventListener("click", handlePictureClick);

    caseToggleBtn.addEventListener("click", () => {
      isUppercase = !isUppercase;
      refreshLetterCase();
    });

    updateCaseButtonText();
    loadLetterRound(); // Init Game 2

    /* ----------------------------------------------------------
       GAME 3: WORD TO PICTURE LOGIC (NEW)
       ---------------------------------------------------------- */
    
    const wordPictureItems = [
      { word: "apple", emoji: "üçé" }, { word: "baby", emoji: "üë∂" },
      { word: "ball", emoji: "‚öΩ" }, { word: "bear", emoji: "üêª" },
      { word: "bell", emoji: "üîî" }, { word: "bird", emoji: "üê¶" },
      { word: "boat", emoji: "üö§" }, { word: "bread", emoji: "üçû" },
      { word: "cake", emoji: "üéÇ" }, { word: "car", emoji: "üöó" },
      { word: "chair", emoji: "ü™ë" }, { word: "chicken", emoji: "üêî" },
      { word: "coat", emoji: "üß•" }, { word: "corn", emoji: "üåΩ" },
      { word: "cow", emoji: "üêÑ" }, 
      // "doll" removed here
      { word: "door", emoji: "üö™" }, { word: "duck", emoji: "ü¶Ü" },
      { word: "egg", emoji: "ü•ö" }, { word: "eye", emoji: "üëÅÔ∏è" },
      { word: "fire", emoji: "üî•" }, { word: "fish", emoji: "üêü" },
      { word: "flower", emoji: "üå∏" }, { word: "hand", emoji: "‚úã" },
      { word: "hill", emoji: "‚õ∞Ô∏è" }, { word: "home", emoji: "üè†" },
      { word: "horse", emoji: "üê¥" }, { word: "house", emoji: "üè°" },
      { word: "letter", emoji: "‚úâÔ∏è" }, { word: "milk", emoji: "ü•õ" },
      { word: "money", emoji: "üíµ" }, { word: "nest", emoji: "ü™π" },
      { word: "paper", emoji: "üìÑ" }, { word: "party", emoji: "üéâ" },
      { word: "picture", emoji: "üñºÔ∏è" }, { word: "rabbit", emoji: "üê∞" },
      { word: "rain", emoji: "üåßÔ∏è" }, { word: "ring", emoji: "üíç" },
      { word: "school", emoji: "üè´" }, { word: "sheep", emoji: "üêë" },
      { word: "shoe", emoji: "üëü" }, { word: "snow", emoji: "‚ùÑÔ∏è" },
      { word: "song", emoji: "üéµ" }, { word: "squirrel", emoji: "üêøÔ∏è" },
      { word: "street", emoji: "üõ£Ô∏è" }, { word: "tree", emoji: "üå≥" },
      { word: "watch", emoji: "‚åö" }, { word: "water", emoji: "üíß" },
      { word: "wind", emoji: "üí®" }, { word: "window", emoji: "ü™ü" },
      { word: "wood", emoji: "ü™µ" }
    ];

    let currentWpIndex = 0;
    let wpLocked = false;

    const targetWordEl = document.getElementById("targetWord");
    const bubbleGridEl = document.getElementById("bubbleGrid");
    const wordGameFeedbackEl = document.getElementById("wordGameFeedback");

    function loadWordToPictureRound() {
      // 1. Reset state
      wpLocked = false;
      wordGameFeedbackEl.textContent = "";
      bubbleGridEl.innerHTML = "";
      
      // 2. Handle wrapping
      if (currentWpIndex >= wordPictureItems.length) {
        shuffleArray(wordPictureItems);
        currentWpIndex = 0;
      }

      // 3. Select Target
      const targetItem = wordPictureItems[currentWpIndex];
      targetWordEl.textContent = targetItem.word;

      // 4. Select 2 Distractors (Changed from 3 to 2)
      const distractors = wordPictureItems.filter(item => item.word !== targetItem.word);
      shuffleArray(distractors);
      // Slice 2 distractors for a total of 3 options
      const choices = [targetItem, ...distractors.slice(0, 2)];
      
      // 5. Shuffle options
      shuffleArray(choices);

      // 6. Render Bubbles
      choices.forEach(item => {
        const isCorrect = (item.word === targetItem.word);
        
        const bubble = document.createElement("div");
        bubble.className = "bubble-option";
        bubble.textContent = item.emoji;
        bubble.dataset.correct = isCorrect ? "true" : "false";
        
        bubble.addEventListener("click", handleBubbleClick);
        bubbleGridEl.appendChild(bubble);
      });
    }

    function handleBubbleClick(e) {
      if (wpLocked) return;
      
      const bubble = e.currentTarget;
      const isCorrect = bubble.dataset.correct === "true";
      
      if (isCorrect) {
        wpLocked = true;
        bubble.classList.add("correct");
        
        const targetWord = targetWordEl.textContent;
        
        // Feedback
        wordGameFeedbackEl.textContent = `Yes! That picture matches "${targetWord}".`;
        wordGameFeedbackEl.style.color = "#2e7d32";
        
        // Confetti
        fireConfettiFromButton(bubble);

        // Next Round Delay
        setTimeout(() => {
          currentWpIndex++;
          loadWordToPictureRound();
        }, 1500);

      } else {
        // Wrong
        bubble.classList.add("wrong");
        wordGameFeedbackEl.textContent = "Oops, try again!";
        wordGameFeedbackEl.style.color = "#d32f2f";
        
        setTimeout(() => {
          bubble.classList.remove("wrong");
        }, 500);
      }
    }

    // Init Game 3
    shuffleArray(wordPictureItems);
    loadWordToPictureRound();

  </script>
</body>
</html>
